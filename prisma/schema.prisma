generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  GUEST
  FOUNDER
  MANAGEMENT
  LEAD
  MEMBER
}

enum MemberStatus {
  PENDING
  APPROVED
  REJECTED
}

model User {
  id        String       @id @default(cuid())
  name      String?
  email     String?      @unique
  emailVerified DateTime?
  image     String?
  role      Role         @default(GUEST)
  status    MemberStatus @default(PENDING)
  profile   Profile?
  leadProjects Project[] @relation("ProjectLead")
  accounts  Account[]
  sessions  Session[]
  createdAt DateTime     @default(now())
  updatedAt DateTime     @updatedAt
}

model Profile {
  id          String   @id @default(cuid())
  userId      String   @unique
  firstName   String
  lastName    String
  phone       String
  email       String
  title       String?
  titleUpdatedAt DateTime?
  position    String?
  company     String?
  linkedinUrl String?
  avatarUrl   String?
  startYear   Int
  endYear     Int?
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model Announcement {
  id        String   @id @default(cuid())
  title     String
  tag       String
  tagClass  String
  date      DateTime
  summary   String
  detail    String
  imageUrl  String?
  links     Json?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Account {
  id                String  @id @default(cuid())
  userId            String
  type              String
  provider          String
  providerAccountId String
  refresh_token     String?
  access_token      String?
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String?
  session_state     String?

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
}

model Session {
  id           String   @id @default(cuid())
  sessionToken String   @unique
  userId       String
  expires      DateTime

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model VerificationToken {
  identifier String
  token      String   @unique
  expires    DateTime

  @@unique([identifier, token])
}

model ContactSettings {
  id             String   @id @default(cuid())
  bannerSubtitle String
  bannerText     String
  joinText       String
  joinHref       String
  emailValue     String
  emailHref      String
  instagramValue String
  instagramHref  String
  xValue         String
  xHref          String
  linkedinValue  String
  linkedinHref   String
  webValue       String
  webHref        String
  address        String
  mapUrl         String
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}

model SponsorsSettings {
  id        String   @id @default(cuid())
  data      Json
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Project {
  id          String   @id @default(cuid())
  name        String
  description String
  year        Int
  leadId      String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  lead User @relation("ProjectLead", fields: [leadId], references: [id], onDelete: Restrict)
}
